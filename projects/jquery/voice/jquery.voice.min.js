/**
 * jQuery Voice plugin 0.3 (31st May 2015)
 * Copyright Subin Siby - http://subinsb.com
 * 
 * ------------------
 * Licensed under MIT
 * ------------------
 * 
 * A jQuery plugin to record, play & download microphone input sound from the user.
 * NEEDS recorder.js and recorderWorker.js to work - https://github.com/mattdiamond/Recorderjs
 * 
 * To use MP3 conversion, NEEDS mp3Worker.js, libmp3lame.min.js and recorder.js from https://github.com/nusofthq/Recordmp3js/tree/master/js
 *
 * Full Documentation & Support - http://subinsb.com/html5-record-mic-voice
*/
;window.Fr = window.Fr || {};(function(e){Fr.voice={workerPath:'cdn/recorderWorker.js',mp3WorkerPath:'cdn/mp3Worker.js',stream:!1,init_called:!1,init:function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.URL=window.URL||window.webkitURL;if(navigator.getUserMedia===!1){alert('getUserMedia() is not supported in your browser')};this.context=new AudioContext()}catch(e){alert('Web Audio API is not supported in this browser')}},record:function(e,t){if(this.init_called===!1){this.init();this.init_called=!0};e$=this;navigator.getUserMedia({audio:!0},function(r){var i=e$.context.createMediaStreamSource(r);if(e===!0){i.connect(e$.context.destination)};e$.recorder=new Recorder(i,{workerPath:e$.workerPath,mp3WorkerPath:e$.mp3WorkerPath});e$.stream=r;e$.recorder.record();t(r)},function(){alert('No live audio input')})},stop:function(){this.recorder.stop();this.recorder.clear();this.stream.stop();return this},export:function(e,t){if(t=='mp3'){this.recorder.exportMP3(e)}else{this.recorder.exportWAV(function(r){if(t==''||t=='blob'){e(r)}else if(t=='base64'){var i=new window.FileReader();i.readAsDataURL(r);i.onloadend=function(){base64data=i.result;e(base64data)}}else if(t=='URL'){var o=URL.createObjectURL(r);e(o)}})}}}})(jQuery);
